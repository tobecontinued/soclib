
# -*- python -*-

__id__ = "$Id$"
__version__ = "$Revision$"

Signal('caba:vci',
	   tmpl_parameters = [parameter.Module('vci_param', default = 'caba:vci_param')],
	   classname = 'soclib::caba::VciSignals',
	   header_files = ['../source/include/vci_signals.h'],
	   accepts = {
	'caba:vci_initiator': 1,
	'caba:vci_target': 1,
	'caba:vci_monitor': True,
	'caba:vci_monitor_out': True,
	},
	   )

PortDecl('caba:vci_initiator',
	 tmpl_parameters = [parameter.Module('vci_param', default = 'caba:vci_param')],
	 classname = 'soclib::caba::VciInitiator',
	 signal = 'caba:vci',
	 header_files = ['../source/include/vci_initiator.h'],
	 )

PortDecl('caba:vci_target',
	 tmpl_parameters = [parameter.Module('vci_param', default = 'caba:vci_param')],
	 classname = 'soclib::caba::VciTarget',
	 signal = 'caba:vci',
	 header_files = ['../source/include/vci_target.h'],
	 )

PortDecl('caba:vci_monitor',
	 tmpl_parameters = [parameter.Module('vci_param', default = 'caba:vci_param')],
	 classname = 'soclib::caba::VciMonitor',
	 signal = 'caba:vci',
	 header_files = ['../source/include/vci_monitor.h'],
		 extensions = ['dsx:port_peer=ignore'],
	 )

PortDecl('caba:vci_monitor_out',
	 tmpl_parameters = [parameter.Module('vci_param', default = 'caba:vci_param')],
	 classname = 'soclib::caba::VciMonitorOut',
	 signal = 'caba:vci',
	 header_files = ['../source/include/vci_monitor_out.h'],
		 extensions = ['dsx:port_peer=ignore'],
	 )

Module('caba:vci_buffers',
	   header_files = ['../source/include/vci_buffers.h'],
	   uses = [
		Uses('common:address_decoding_table', input_t = 'uint32_t', output_t = 'bool'),
		Uses('common:address_decoding_table', input_t = 'uint32_t', output_t = 'int'),
		Uses('common:address_masking_table', data_t = 'uint32_t'),
		Uses('common:dpp'),
	],
	 )

Module('caba:vci_param',
	   classname = 'soclib::caba::VciParams',
	   tmpl_parameters = [
		parameter.Int('cell_size'),
		parameter.Int('plen_size'),
		parameter.Int('addr_size'),
		parameter.Int('rerror_size'),
		parameter.Int('clen_size'),
		parameter.Int('rflag_size'),
		parameter.Int('srcid_size'),
		parameter.Int('pktid_size'),
		parameter.Int('trdid_size'),
		parameter.Int('wrplen_size'),
		],
	   header_files = ['../source/include/vci_param.h',],
)
